<html>
<head>
<style>

 #map-wrapper {
    width: 400px;
    height: 300px;
    position: relative;
}

#map {
    width: 100%;
    height: 100%;
    display: inline-block;
}

#button-wrapper {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    border: 1px solid red;
    display: block;
}
.map-button{
	width: 100%;
	display:inline-block;
}
</style>
<script>
function calcRoute(mode,start,end) {
  var request = {
    origin:start,
    destination:end,
    travelMode: mode
  };
  directionsService.route(request, function(response, status) {
    if (status == 'OK') {
      directionsDisplay.setDirections(response);
    }
  });
}
</script>
</head>
<body>
<h3>My Google Maps Demo</h3>
<div>
    <div id="map-wrapper">
        <div id="map"></div>
		<script>
      function initMap() {
        directionsService = new google.maps.DirectionsService();
		directionsDisplay = new google.maps.DirectionsRenderer();
		var chicago = new google.maps.LatLng(41.850033, -87.6500523);
		var mapOptions = {
			zoom:12,
			center: chicago
		}
		var map = new google.maps.Map(document.getElementById('map'), mapOptions);
		directionsDisplay.setMap(map);
		directionsDisplay.setPanel(document.getElementById('directionsPanel'));

      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBcrBxlXi_PvW591GLcKs4St2gkJK_V4I0&callback=initMap">
    </script>
        <span style="display: block; width: 85px; vertical-align: top; position:absolute; top:0px; left:0px; background: #FCFCFC;">
            <button class="map-button" onclick="calcRoute('WALKING',new google.maps.LatLng(34.0276171,-118.2829473),new google.maps.LatLng(34.1381168, -118.3533783))">Walk there</button>
			<button class="map-button" onclick="calcRoute('BICYCLING',new google.maps.LatLng(34.0276171,-118.2829473),new google.maps.LatLng(34.1381168, -118.3533783))">Bike there</button>
			<button class="map-button" onclick="calcRoute('DRIVING',new google.maps.LatLng(34.0276171,-118.2829473),new google.maps.LatLng(34.1381168, -118.3533783))">Drive there</button>
		</span>
    </div>
    </div>

</body>
</html>


/*function initMap(lat,lng) {
        directionsService = new google.maps.DirectionsService();
		directionsDisplay = new google.maps.DirectionsRenderer();
		var mapCenter = new google.maps.LatLng(lat, lng);
		var mapOptions = {
			zoom:12,
			center: mapCenter
		}
		var map = new google.maps.Map(document.getElementById('map'), mapOptions);
		directionsDisplay.setMap(map);
		directionsDisplay.setPanel(document.getElementById('directionsPanel'));

}

/*function calcRoute(mode,start,end) {
  var request = {
    origin:start,
    destination:end,
    travelMode: mode
  };
  directionsService.route(request, function(response, status) {
    if (status == 'OK') {
      directionsDisplay.setDirections(response);
    }
  });
}*/

function buildMap(lat,lng,element){
	var mapDiv = document.createElement("div");
	var html = "<div id=\"map-wrapper\"><div id=\"map\"></div>";
	html +=	"<script>initMap("+lat+","+lng+");</script>";
    html += "<script async defer src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBcrBxlXi_PvW591GLcKs4St2gkJK_V4I0&callback=initMap\"></script>";
    html += "<span style=\"display: block; width: 85px; vertical-align: top; position:absolute; top:0px; left:0px; background: #FCFCFC;\">";
    html += "<button class=\"map-button\" onclick=\"calcRoute('WALKING',new google.maps.LatLng("+lattitude+","+longitude+"),new google.maps.LatLng("+lat+","+lng+"))\">Walk there</button>";
	html += "<button class=\"map-button\" onclick=\"calcRoute('BICYCLING',new google.maps.LatLng("+lattitude+","+longitude+"),new google.maps.LatLng("lat+","+lng+"))\">Bike there</button>";
	html += "<button class=\"map-button\" onclick=\"calcRoute('DRIVING',new google.maps.LatLng("+lattitude+","+longitude+"),new google.maps.LatLng("+lat","+lng+"))\">Drive there</button>";
	html += "</span></div>";
	mapDiv.innerHTML = html;
	var rect = element.getBoundingClientRect();
	mapDiv.style.position = "absolute";
	mapDiv.style.left = (rect.left+5)+'px';
	mapDiv.style.top = (rect.top+5)+'px';
	mapDiv.style.zIndex = 999;
	document.body.appendChild(mapDiv);
	
}